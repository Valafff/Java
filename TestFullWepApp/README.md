# TestFullWepApp - Полнофункциональное веб-приложение на Spring Boot

## Описание

Это веб-приложение, разработанное на Java с использованием Spring Boot. Оно представляет собой калькулятор с возможностью регистрации пользователей, аутентификации и сохранения истории вычислений для каждого пользователя. Приложение имеет как многостраничный веб-интерфейс (MVC), так и документированный REST API.

## Функционал

-   **Пользовательская аутентификация:**
    -   Регистрация новых пользователей.
    -   Вход в систему.
    -   Безопасное хранение паролей с использованием **BCrypt hashing**.
-   **Веб-интерфейс:**
    -   Стартовая страница с навигацией.
    -   Страницы для регистрации и входа.
    -   Страница калькулятора, доступная после входа.
    -   Отображение истории вычислений для текущего пользователя.
-   **Калькулятор:**
    -   Выполнение базовых математических операций.
    -   Сохранение каждого вычисления и его результата в базе данных.
-   **REST API:**
    -   Полностью документированный API с использованием **Swagger (OpenAPI)**.
    -   Эндпоинты для регистрации, входа, выхода, выполнения вычислений и получения истории.
-   **База данных:**
    -   Интеграция с **PostgreSQL** для хранения данных о пользователях и их вычислениях.

---

## Технологии и библиотеки

-   **Бэкенд:**
    -   Java 21
    -   Spring Boot 3
    -   Spring MVC (для веб-интерфейса)
    -   Spring Data JPA (для работы с базой данных)
    -   Spring Security (для аутентификации и хэширования паролей)
-   **Фронтенд:**
    -   Thymeleaf (для создания динамических HTML-страниц)
    -   HTML5 & CSS3
-   **База данных:**
    -   PostgreSQL
-   **API и документация:**
    -   Swagger (OpenAPI 3)
-   **Инструменты и зависимости:**
    -   Maven (для управления зависимостями и сборки проекта)
    -   exp4j (для вычисления математических выражений)
    -   Tomcat (встроенный сервер приложений)

---

## Настройка и запуск

### 1. Предварительные требования

-   **JDK 21** или выше.
-   **Apache Maven**.
-   **PostgreSQL** сервер.

### 2. Настройка базы данных

Перед запуском приложения необходимо создать базу данных в PostgreSQL.

-   **Имя базы данных:** `databaseName`
-   **Пользователь:** `vi`
-   **Пароль:** `databasepassword`

Данные для подключения можно изменить в файле `src/main/resources/application.properties`.

```properties
spring.datasource.url=jdbc:postgresql://localhost:5433/databaseName
spring.datasource.username=vi
spring.datasource.password=databasepassword
```

### 3. Запуск приложения

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <URL_репозитория>
    cd TestFullWepApp
    ```

2.  **Запуск через IDE:**
    -   Откройте проект в вашей любимой IDE (например, IntelliJ IDEA или Eclipse).
    -   Найдите класс `TestFullWepAppApplication.java` и запустите его метод `main`.
    -   IDE автоматически загрузит все Maven-зависимости.

3.  **Запуск через Maven (если `mvn` настроен в PATH):**
    ```bash
    mvn spring-boot:run
    ```

Приложение будет запущено на порту **8080**.

---

## Использование приложения

### Веб-интерфейс

-   **Главная страница:** [http://localhost:8080/](http://localhost:8080/)
    -   Содержит навигацию по основным разделам сайта.
-   **Регистрация:** [http://localhost:8080/auth/register](http://localhost:8080/auth/register)
    -   Создайте нового пользователя. Пароль будет сохранен в зашифрованном виде.
-   **Вход:** [http://localhost:8080/auth/login](http://localhost:8080/auth/login)
    -   Войдите, используя данные зарегистрированного пользователя.
-   **Калькулятор:** [http://localhost:8080/calculate](http://localhost:8080/calculate)
    -   Эта страница доступна только после входа. Здесь вы можете вводить математические выражения и просматривать историю своих вычислений.

### REST API (Swagger)

API предоставляет программный доступ к функционалу приложения.

-   **Swagger UI (документация):** [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)

На этой странице вы найдете полное описание всех доступных эндпоинтов, их параметры и можете отправлять тестовые запросы прямо из браузера.

-   **Базовый URL для API:** `/api/v1`
-   **Примеры эндпоинтов:**
    -   `POST /api/v1/auth/register` - Регистрация пользователя.
    -   `POST /api/v1/auth/login` - Вход пользователя.
    -   `POST /api/v1/calculate` - Выполнение вычисления.
    -   `GET /api/v1/calculate/history` - Получение истории вычислений.

**Важно:** Для использования API-эндпоинтов калькулятора необходимо сначала выполнить вход через эндпоинт `/api/v1/auth/login`, чтобы создать активную сессию.
