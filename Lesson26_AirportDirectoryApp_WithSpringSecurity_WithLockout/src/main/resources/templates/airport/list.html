<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>AirportDirectoryApp</title>
    <!-- подключение стилей bootstrap -->
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
</head>
<body>
    <div class="container-fluid text-center">
        <h1>Список Аэропортов</h1>

        <!-- вывод сообщения об ошибке -->
        <p class="alert alert-danger text-center m-1" th:if="${errorMessage != null}">[[${errorMessage}]]</p>

        <!-- вывод сообщения -->
        <p class="alert alert-success text-center m-1" th:if="${message != null}">[[${message}]]</p>

        <!-- вывод всех записей в виде таблицы -->
        <table class="table table-bordered">
            <thead class="table-secondary">
                <tr>
                    <th>Код</th>
                    <th>Наименование</th>
                    <th>Кол-во ВПП</th>
                    <th sec:authorize="hasRole('ADMIN')">Действия</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="airport : ${airports}">
                    <td>[[${airport.code}]]</td>
                    <td>[[${airport.name}]]</td>
                    <td>[[${airport.runwayCount}]]</td>
                    <td sec:authorize="hasRole('ADMIN')">
                        <a class="btn btn-primary" th:href="@{'/airport/edit/' + ${airport.code}}">Редактировать</a>
                        <a class="btn btn-danger" th:href="@{'/airport/delete/' + ${airport.code}}">Удалить</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <p sec:authorize="hasRole('ADMIN')"><a th:href="@{/airport/new}">Добавить новую запись</a></p>
        <p><a th:href="@{/}">На Index</a></p>
    </div>

    <!-- подключение скриптов bootstrap -->
    <script th:src="@{/webjars/bootstrap/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
